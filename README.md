# Pattern Recognition Engine

–î–≤–∏–∂–æ–∫ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**: —Å–≤–µ—á–Ω—ã–µ, –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ, –≥–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑**: 20+ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (RSI, MACD, Bollinger Bands –∏ –¥—Ä.)
- **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ**: –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- **–ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥**: –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Å Plotly –∏ Matplotlib
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–∏—Å–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: Yahoo Finance, MetaTrader 5, CSV —Ñ–∞–π–ª—ã

## üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
- Python 3.8+
- 4GB RAM –º–∏–Ω–∏–º—É–º
- 2GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
- MetaTrader 5 (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏)
- GPU —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA (–¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è ML)

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/DiamondDim/pattern_recognition_engine.git
cd pattern_recognition_engine
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pip (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
pip install -r requirements.txt
```

#### –°–ø–æ—Å–æ–± 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Poetry
```bash
poetry install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
LOG_LEVEL=INFO
DATA_DIR=./data
RESULTS_DIR=./results

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MetaTrader 5 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
MT5_LOGIN=your_login
MT5_PASSWORD=your_password
MT5_SERVER=your_server
MT5_PATH=C:/Program Files/MetaTrader 5/terminal64.exe

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Yahoo Finance (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö)
YFINANCE_TIMEOUT=10
YFINANCE_MAX_RETRIES=3
```

### 4. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
python scripts/init_database.py
```

### 5. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

```bash
python run.py --mode test --symbol EURUSD --timeframe H1 --bars 1000
```

## üõ† –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (config.py)

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã
DEBUG = False
LOG_LEVEL = "INFO"
DATA_DIR = Path("./data")
RESULTS_DIR = Path("./results")
MODELS_DIR = Path("./models")

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
PATTERN_MIN_CONFIDENCE = 0.6
PATTERN_MIN_BARS = 5
MAX_PATTERNS_PER_SYMBOL = 100

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
ML_BATCH_SIZE = 32
ML_EPOCHS = 100
ML_VALIDATION_SPLIT = 0.2
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏

```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞
RISK_PER_TRADE = 0.01  # 1% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ –Ω–∞ —Å–¥–µ–ª–∫—É
MAX_POSITION_SIZE = 1.0  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ –ª–æ—Ç–∞—Ö
LEVERAGE = 100  # –ö—Ä–µ–¥–∏—Ç–Ω–æ–µ –ø–ª–µ—á–æ
STOP_LOSS_PERCENT = 2.0  # –°—Ç–æ–ø-–ª–æ—Å—Å –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
TAKE_PROFIT_PERCENT = 4.0  # –¢–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
```

## üöÄ –ó–∞–ø—É—Å–∫ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö

### 1. –†–µ–∂–∏–º –∞–Ω–∞–ª–∏–∑–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)

```bash
python main.py --mode analyze --symbol AAPL --timeframe 1d --period 1y
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `--mode`: —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (analyze, backtest, trade, monitor)
- `--symbol`: —Ç–æ—Ä–≥–æ–≤—ã–π —Å–∏–º–≤–æ–ª (AAPL, EURUSD, BTCUSDT)
- `--timeframe`: —Ç–∞–π–º—Ñ—Ä–µ–π–º (1m, 5m, 15m, 1h, 4h, 1d)
- `--period`: –ø–µ—Ä–∏–æ–¥ –¥–∞–Ω–Ω—ã—Ö (1d, 1w, 1m, 1y)
- `--output`: –ø—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 2. –†–µ–∂–∏–º –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞

```bash
python main.py --mode backtest \
    --symbol EURUSD \
    --timeframe H1 \
    --start 2023-01-01 \
    --end 2023-12-31 \
    --strategy pattern_based \
    --initial_balance 10000
```

### 3. –†–µ–∂–∏–º —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MT5)

```bash
python main.py --mode trade \
    --symbol EURUSD \
    --timeframe M15 \
    --risk 0.02 \
    --max_trades 3
```

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
python main.py --mode monitor \
    --symbols EURUSD,GBPUSD,USDJPY \
    --timeframe M5 \
    --interval 60 \
    --notifications
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

```python
from core.pattern_detector import PatternDetector
from core.data_feeder import DataFeeder
from utils.visualization import PatternVisualizer

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
feeder = DataFeeder()
data = feeder.load_ohlc_data(
    source='yfinance',
    symbol='AAPL',
    timeframe='1d',
    bars=1000
)

# –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
indicators = feeder.calculate_indicators(data)

# –î–µ—Ç–µ–∫—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
detector = PatternDetector()
patterns = detector.detect_all_patterns(data, indicators)

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
visualizer = PatternVisualizer()
for pattern in patterns[:5]:  # –ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–≤—ã–µ 5 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
    fig = visualizer.plot_pattern(
        pattern.pattern_data,
        data,
        indicators,
        save_path=f'./results/pattern_{pattern.pattern_name}.png'
    )
```

### –ü—Ä–∏–º–µ—Ä 2: –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

```python
from core.backtesting import BacktestEngine
from core.pattern_analyzer import PatternAnalyzer

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–≤–∏–∂–∫–∞ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞
engine = BacktestEngine()

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
analyzer = PatternAnalyzer()
analysis = analyzer.analyze_pattern(pattern, data)

# –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞
if analysis['recommendations']['primary_action'] == 'strong_buy':
    order = Order(
        id=generate_id(),
        symbol='AAPL',
        order_type=OrderType.BUY,
        volume=engine.calculate_position_size(
            entry_price=analysis['trading_signals']['entry_price'],
            stop_loss=analysis['trading_signals']['stop_loss'],
            risk_percent=1.0
        ),
        entry_price=analysis['trading_signals']['entry_price'],
        stop_loss=analysis['trading_signals']['stop_loss'],
        take_profit=analysis['trading_signals']['take_profit']
    )
    engine.place_order(order)

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
report = engine.generate_report()
print(f"–ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å: ${report['summary']['net_profit']:.2f}")
```

### –ü—Ä–∏–º–µ—Ä 3: –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è

```python
from core.ml_models import PatternClassifier
from core.pattern_database import PatternDatabase

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
db = PatternDatabase()
historical_patterns = db.find_patterns(
    symbol='EURUSD',
    timeframe='H1',
    min_confidence=0.6,
    limit=1000
)

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
classifier = PatternClassifier(model_type='xgboost')
X, y = classifier.prepare_features(historical_patterns)

# –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
metrics = classifier.train(X, y, validation_split=0.2)
print(f"–¢–æ—á–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏: {metrics['val_accuracy']:.2%}")

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
classifier.save_model('./models/pattern_classifier_v1.joblib')
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
pattern_recognition_engine/
‚îú‚îÄ‚îÄ core/                    # –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ backtesting.py      # –î–≤–∏–∂–æ–∫ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ data_feeder.py      # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ ml_models.py        # –ú–æ–¥–µ–ª–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ pattern_analyzer.py # –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ pattern_database.py # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ pattern_detector.py # –î–µ—Ç–µ–∫—Ç–æ—Ä –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ statistics.py       # –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã
‚îú‚îÄ‚îÄ patterns/               # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ base_pattern.py     # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ candlestick_patterns.py  # –°–≤–µ—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ geometric_patterns.py    # –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ harmonic_patterns.py     # –ì–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
‚îú‚îÄ‚îÄ utils/                  # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ helpers.py          # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ logger.py           # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ mt5_connector.py    # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MT5
‚îÇ   ‚îî‚îÄ‚îÄ visualization.py    # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ main.py               # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ run.py               # –°–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ pyproject.toml      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Poetry
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MetaTrader 5

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MetaTrader 5
2. –°–æ–∑–¥–∞–π—Ç–µ –¥–µ–º–æ-—Å—á–µ—Ç –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π
3. –û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env`:

```env
MT5_PATH=C:/Program Files/MetaTrader 5/terminal64.exe
MT5_LOGIN=1234567
MT5_PASSWORD=your_password
MT5_SERVER=MetaQuotes-Demo
```

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```bash
python utils/mt5_connector.py --test
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PostgreSQL:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ psycopg2:
```bash
pip install psycopg2-binary
```

2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```python
DATABASE_CONFIG = {
    'ENGINE': 'postgresql',
    'NAME': 'pattern_db',
    'USER': 'postgres',
    'PASSWORD': 'your_password',
    'HOST': 'localhost',
    'PORT': 5432
}
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö:

1. –í–∫–ª—é—á–∏—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `config.py`:
```python
CACHE_ENABLED = True
CACHE_MAX_SIZE = 10000
CACHE_TTL = 3600  # 1 —á–∞—Å
```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å:
```python
MAX_WORKERS = 4
PARALLEL_PROCESSING = True
```

3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ML:
```python
ML_USE_GPU = True
ML_BATCH_SIZE = 64
ML_OPTIMIZER = 'adam'
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest tests/ -v

# –¢–µ—Å—Ç—ã –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
pytest tests/test_patterns.py -v

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=core --cov-report=html tests/
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

```bash
# –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
python tests/test_data_loading.py

# –¢–µ—Å—Ç –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞
python tests/test_backtesting.py --symbol EURUSD --bars 500

# –¢–µ—Å—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
python tests/test_visualization.py --save
```

## üìà –ü—Ä–∏–º–µ—Ä—ã –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –û—Ç—á–µ—Ç –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞

```json
{
  "summary": {
    "initial_balance": 10000.0,
    "final_balance": 11250.75,
    "net_profit": 1250.75,
    "total_return_pct": 12.51,
    "total_trades": 45,
    "winning_trades": 28,
    "losing_trades": 17,
    "win_rate_pct": 62.22,
    "profit_factor": 1.85,
    "max_drawdown_pct": 8.42,
    "sharpe_ratio": 1.24
  }
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

```
–¢–∏–ø –ø–∞—Ç—Ç–µ—Ä–Ω–∞      –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ  –£—Å–ø–µ—à–Ω–æ—Å—Ç—å  –°—Ä–µ–¥. –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
---------------  -----------  ----------  ----------------
Head & Shoulders           12        58.3%             2.1%
Double Top                  8        62.5%             1.8%
Triangle                   15        66.7%             2.4%
Bull Flag                   9        77.8%             3.2%
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# DEBUG - –ø–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞
python main.py --log-level DEBUG

# INFO - –æ–±—ã—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
python main.py --log-level INFO

# WARNING - —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
python main.py --log-level WARNING
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/pattern_engine.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR" logs/pattern_engine.log

# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
grep "Execution time" logs/pattern_engine.log
```

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ë–µ–Ω—á–º–∞—Ä–∫–∏

| –û–ø–µ—Ä–∞—Ü–∏—è | –í—Ä–µ–º—è (1000 –±–∞—Ä–æ–≤) | –í—Ä–µ–º—è (10000 –±–∞—Ä–æ–≤) |
|----------|-------------------|---------------------|
| –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö | 0.5 —Å–µ–∫ | 3.2 —Å–µ–∫ |
| –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ | 1.2 —Å–µ–∫ | 8.7 —Å–µ–∫ |
| –î–µ—Ç–µ–∫—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ | 2.1 —Å–µ–∫ | 18.5 —Å–µ–∫ |
| –û–±—É—á–µ–Ω–∏–µ ML –º–æ–¥–µ–ª–∏ | 15 —Å–µ–∫ | 120 —Å–µ–∫ |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
```python
from functools import lru_cache

@lru_cache(maxsize=128)
def calculate_indicators(data):
    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã
```

2. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è NumPy:
```python
# –í–º–µ—Å—Ç–æ —Ü–∏–∫–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
returns = np.diff(prices) / prices[:-1]
```

3. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
```python
async def process_multiple_symbols(symbols):
    tasks = [load_data(symbol) for symbol in symbols]
    results = await asyncio.gather(*tasks)
```

## üìö API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã

#### PatternDetector
```python
detector = PatternDetector()
patterns = detector.detect_all_patterns(data, indicators)
```

#### BacktestEngine
```python
engine = BacktestEngine(initial_balance=10000)
engine.place_order(order)
report = engine.generate_report()
```

#### PatternClassifier
```python
classifier = PatternClassifier(model_type='random_forest')
classifier.train(X, y)
predictions = classifier.predict(new_data)
```

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
git clone https://github.com/DiamondDim/pattern_recognition_engine.git
cd pattern_recognition_engine
pip install -r requirements-dev.txt
pre-commit install
```

### –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–º–º–∏—Ç–æ–≤

```bash
# –¢–∏–ø—ã –∫–æ–º–º–∏—Ç–æ–≤:
# feat: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
# fix: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
# docs: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
# style: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
# refactor: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞
# test: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
# chore: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

git commit -m "feat: add new harmonic pattern detection"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
pytest tests/
flake8 core/ utils/ patterns/
black --check .
```

## üÜò –ü–æ–∏—Å–∫ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MT5**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ç–µ—Ä–º–∏–Ω–∞–ª—É –≤ `.env`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MT5 –∑–∞–ø—É—â–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å

2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏**
   ```bash
   pip install --upgrade pip
   pip install -r requirements.txt --force-reinstall
   ```

3. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏**
   - –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –≤ `config.py`
   - –í–∫–ª—é—á–∏—Ç–µ `USE_INCREMENTAL_LEARNING = True`

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `logs/pattern_engine.log`
2. –°–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ—à–∏–±–∫–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º:
   ```bash
   python main.py --debug --log-level DEBUG
   ```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ LICENSE

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- –ê–≤—Ç–æ—Ä: DiamondDim
- GitHub: [https://github.com/DiamondDim](https://github.com/DiamondDim)
- Issues: [GitHub Issues](https://github.com/DiamondDim/pattern_recognition_engine/issues)

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏:

```bash
git pull origin main
pip install -r requirements.txt --upgrade
python scripts/update_database.py
```

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ü–µ–ª–µ–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫. –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏.